</html>
<head>
<title>『猫でもわかるC言語プログラミング』第8章 練習問題　解答</title>
<META http-equiv=Content-Type content="text/html; charset=shift_jis">
<meta name="robots" content="index,follow">
<META http-equiv=Content-Style-Type" content="text/css">
<LINK REL="stylesheet" HREF="maincss.css" TYPE="text/css">
</head>
<body>

<br>
<h1>猫でもわかるC言語プログラミング</h1>
<h2>第8章　練習問題　解答</h2>


1. 解答例<br>
<pre class=code>
/* tokyoso.c */

#define NO 40

#include &lt;stdio.h&gt;

int main()
{
	double tm[NO], sum = 0.0;
	int i;

	printf("タイムを入力してください\n");

	for (i = 0; i < NO; i++) {
		printf("出席番号%2d番のタイム = ", i + 1);
		scanf("%lf", &tm[i]);
		sum += tm[i];
	}
	printf("------------------\n");
	printf("平均値は%lf秒です\n", sum / NO);
	printf("------------------\n");
	while (1) {
		printf("出席番号(0で終了) : ");
		scanf("%d", &i);
		if (i == 0)
			break;
		printf("%d番のタイム : %f\n", i, tm[i - 1]);
	}

	return 0;
}
</pre>

<br>

2. 解答例<br>
<pre class=code>
/* yobi.c */

#include &lt;stdio.h&gt;

int main()
{
	char *yobi[] = {
		"土曜日",
		"日曜日",
		"月曜日",
		"火曜日",
		"水曜日",
		"木曜日",
		"金曜日",
	};
	int day;

	while (1) {
		printf("日にちを入力してください(1-31)[0で終了] : ");
		scanf("%d", &day);
		if (day == 0)
			break;
		printf("%d日は%sです\n", day, yobi[day % 7]);
	}

	return 0;
}
</pre>
<p>6日が金曜日です。6を7で割ったあまりは6です。つまりyobi[6]が"金曜日"を表すように配列を考えます。</p>

<br>

3. 解答例<br>
<pre class=code>
/* rev.c */

#include &lt;stdio.h&gt;

void rev(char *);

int main()
{
	char instr[64];
	printf("文字列を入力してください\n");
	gets(instr);
	rev(instr);
	printf("逆順に並び替えると\n");
	printf("%s\n", instr);

	return 0;
}

void rev(char *string)
{
	char c, *ptr;

	ptr = string + strlen(string) - 1;

	while (string < ptr) {
		c = *string;
		*string++ = *ptr;
		*ptr-- = c;
	}
	return;
}
</pre>
<p>これは、昔からある文字列逆転関数です。仮にstringが文字列"abcde"を指しているものとします。string + strlen(string) - 1は、"abcde"の'e'のアドレスを表していますね。つまり、*ptrは文字列の(ヌル文字を除く)最後の文字です。</p>
<p>
while文の中では、<br>
（1回目のループ）<br>
まずcに'a'を格納すします。次に文字列の先頭文字(*string)のところに最後尾の文字(*ptr)をコピーします。"abcde"の'e'のところにcをコピーします。
<br><br>
（2回目のループ）<br>
cに'b'をコピーします。最後尾から2番目の文字('d')を文字列の2番目の位置にコピーします。'b'を文字列の後ろから2番目の位置にコピーします。
<br><br>
これで、継続条件式を満たさなくなりました。stringやptrがそれぞれ何を指しているかを図を描いて考えるとわかりやすいと思います。ポインタを利用すると、こんなに簡単にプログラムを書くことができます。
</p>
<br>

</body>
</html>

