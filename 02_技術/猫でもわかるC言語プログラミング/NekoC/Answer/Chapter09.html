</html>
<head>
<title>『猫でもわかるC言語プログラミング』第9章 練習問題　解答</title>
<META http-equiv=Content-Type content="text/html; charset=shift_jis">
<meta name="robots" content="index,follow">
<META http-equiv=Content-Style-Type" content="text/css">
<LINK REL="stylesheet" HREF="maincss.css" TYPE="text/css">
</head>
<body>

<br>
<h1>猫でもわかるC言語プログラミング</h1>
<h2>第9章　練習問題　解答</h2>


1. 解答例<br>
<pre class=code>
/* structaddr.c */

#include &lt;stdio.h&gt;

int main()
{
	struct {
		char *stra[2];
		char *strb[5];
		int a;
		float b;
		char c;
	} mystruct;

	printf("mystruct.stra = %p\n"
		"mystruct.strb = %p\n"
		"&mystruct.a = %p\n"
		"&mystruct.b = %p\n"
		"&mystruct.c = %p\n",
		mystruct.stra, mystruct.strb, &mystruct.a, &mystruct.b, &mystruct.c);

	return 0;
}
</pre>
筆者の環境では、実行結果は次のようになりました。
<pre class=code>
mystruct.stra = 0012FEC0
mystruct.strb = 0012FEC8
&mystruct.a = 0012FEDC
&mystruct.b = 0012FEE0
&mystruct.c = 0012FEE4
</pre>
<br>

2. <br>
列挙型は次のように宣言します。
<pre>
enum 列挙型の名前 {識別子, ....};
</pre>
識別子は前から順に0, 1, 2,..という値が割り当てられています。
<pre>
enum Pet{cat, rat, dog};
</pre>
この場合catには0、ratには1、dogには2が割り振られています。この値は、重複したり、間が飛んでもかまいません。
<pre>
enum Pet{cat, rat = 5, dog};
</pre>
とすると
catには0、ratには5、dogには6が割り振られます。
<br><br>
<pre class=code>
/* enum.c */

#include &lt;stdio.h&gt;

int main()
{
	enum PET {bird, cat, rat, dog, rabbit};
	enum PET pet;
	char *animal[] = {"鳥", "猫", "ねずみ", "犬", "ウサギ"};

	printf("飼っているペットはどれですか\n");
	printf("0:%s, 1:%s, 2:%s, 3:%s, 4:%s ---> ",
		animal[bird], animal[cat], animal[rat], animal[dog], animal[rabbit]);
	scanf("%d", &pet);
	printf("あなたの飼っているペットは%sです\n", animal[pet]);

	return 0;
}
</pre>
<br>

3. 解答例<br>

<pre class=code>
/* structfunc.c */

#include &lt;stdio.h&gt;
#include &lt;string.h&gt;

char *addstr(char *);

int main()
{
	struct meibo {
		char name[16];
		char name2[24];
		char *(*add)();
	}m;

	strcpy(m.name, "粂井康孝");
	m.add = addstr;
	strcpy(m.name2, m.add(m.name));
	printf("%s\n", m.name2);

	return 0;
}

char *addstr(char *str)
{
	return strcat(str, "様");
}
</pre>

<p>meibo構造体はchar型へのポインタを返す関数のアドレスをメンバに持っています。さて、このプログラムの意味はわかるでしょうか。name2メンバにnameメンバの文字列に"様"を追加してコピーしています。</p>

<br>

</body>
</html>

